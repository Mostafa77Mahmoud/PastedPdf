
بناءً على مراجعة الملف النصي الذي قمت برفعه، إليك تقييم شامل لجودة المحتوى بعد التنظيف، ومقارنة أدائه المتوقع مع ملف PDF الأصلي عند استخدامه في Gemini File Search أو أي نظام RAG (Retrieval-Augmented Generation).
التقييم العام: ضعيف إلى متوسط (يحتاج إلى تحسين كبير)
النص الحالي، بصورته هذه، لن يعطيك أداءً أفضل من الـ PDF الأصلي، بل قد يسبب "هلوسة" (Hallucination) للنموذج أو تشتتًا في النتائج لعدة أسباب تقنية سأوضحها لك بالتفصيل مع أمثلة من ملفك:
المشاكل الموجودة في الملف (لماذا الأداء سيكون ضعيفاً؟)
1. تكرار الجمل والكلمات (Duplication/Ghosting):
هذه هي المشكلة الأكبر في الملف. يبدو أن السكريبت قرأ النص مرتين (ربما بسبب وجود طبقات نصية مخفية في الـ PDF أو تكرار قراءة الـ Header والـ Body).
مثال من ملفك:
"ﺍﻟﺤﻤﺪ ﻟﻠﻪ ﺭﺏ ﺍﻟﻌﺎﻟﻤﻴﻦ، ﻭﺍﻟﺼﻼﺓ ﻭﺍﻟﺴــﻼﻡ ﻋﻠﻰ ﺃﺷــﺮﻑ ﺍﻟﻤﺮﺳﻠﻴﻦ، ﺳﻴﺪﻧﺎ ﺍﻟﺤﻤﺪ ﻟﻠﻪ ﺭﺏ ﺍﻟﻌﺎﻟﻤﻴﻦ، ﻭﺍﻟﺼﻼﺓ ﻭﺍﻟﺴــﻼﻡ ﻋﻠﻰ ﺃﺷــﺮﻑ ﺍﻟﻤﺮﺳﻠﻴﻦ، ﺳﻴﺪﻧﺎ"
التأثير: هذا التكرار يضاعف عدد الـ Tokens (التكلفة والمساحة) ويشتت انتباه النموذج، حيث يرى الجملة مكررة بشكل غير منطقي، مما يضعف "السياق الدلالي" (Semantic Context).
2. تكرار وتشوه أرقام الصفحات:
أرقام الصفحات تم دمجها وتكرارها بشكل غريب.
مثال من ملفك:
"٥١٥١" (بدلاً من 15)، "٩١٩١" (بدلاً من 19)، "٣٠٢ ٣٠٢".
التأثير: عند البحث، إذا سألت النموذج "ماذا يوجد في صفحة 15؟"، قد لا يجدها لأنه يرى الرقم "5151". كما أن هذه الأرقام تقطع حبل الأفكار في منتصف الجمل.
3. بقايا الفهرس (Table of Contents Artifacts):
السكريبت لم يزيل النقاط الخاصة بالفهرس بشكل صحيح.
مثال من ملفك:
"..................................................................... ٩ .....................................................................ﻛﻠﻤﺔ ﺍﻷﻣﻴﻦ ﺍﻟﻌﺎﻡ"
التأثير: هذه النقاط تعتبر "ضوضاء" (Noise) لا فائدة منها وتستهلك مساحة المعالجة.
4. تداخل الحواشي السفلية مع المتن (Footnotes Merging):
النص يدمج الحاشية السفلية (الهوامش) في وسط الجملة الرئيسية، وغالباً ما تكون مكررة أيضاً.
مثال من ملفك:
".(.(٢٨٢ ٢٨٢) :ﺍﻵﻳﺔ ،ﺍﻟﺒﻘﺮﺓ ﺳﻮﺭﺓ ) :ﺳﻮﺭﺓ ﺍﻟﺒﻘﺮﺓ، ﺍﻵﻳﺔ (١)"
التأثير: هذا يكسر الجملة الفقهية أو المعيار الشرعي، مما يجعل النموذج غير قادر على فهم الحكم الشرعي بشكل متصل وصحيح.
5. مشاكل في اتجاه النص (RTL/LTR):
هناك خلط في الأقواس والأرقام الإنجليزية والعربية، مما يجعل النص يظهر بشكل "مقلوب" أحياناً في السياق البرمجي.
مثال: ( ٨٥-)١ بدلاً من (1-85).
هل سيعطي أداءً قوياً في Gemini؟
الإجابة المختصرة: لا.
الإجابة التفصيلية:
نماذج Gemini الحديثة (مثل 1.5 Pro أو Flash) تمتلك قدرة عالية جداً على قراءة ملفات PDF الأصلية (Multimodal capabilities). هي قادرة بصرياً على تمييز الهوامش، وأرقام الصفحات، والعناوين أفضل من السكريبت الذي استخدمته حالياً.
تقديم هذا النص "المشوش" للنموذج سيجعله يعاني في:
الاستشهاد بالمصادر: لن يعرف رقم الصفحة الصحيح بسبب التكرار (٥١٥١).
التلخيص: سيكرر الجمل في التلخيص لأنها مكررة في المصدر.
الدقة الفقهية: تداخل الهوامش مع المتن قد يغير المعنى الشرعي (مثلاً: شرط معين قد يظهر وكأنه جزء من آية قرانية أو حديث بسبب سوء التنسيق).
كيف تجعله أفضل من الـ PDF الأصلي؟ (خطة العمل)
للحصول على أداء أفضل من الـ PDF، يجب أن يكون النص "نظيفاً تماماً" (Clean Text). عليك تعديل سكريبت البايثون ليقوم بالآتي:
إزالة التكرار (Deduplication):
استخدم دالة لمقارنة السطر الحالي بالسطر السابق. إذا كان التشابه (Similarity Ratio) أكثر من 90%، قم بحذف السطر الثاني.
مثال: إذا وجدت "المعيار الشرعي" ثم "المعيار الشرعي" في السطر التالي، احذف أحدهما.
تنظيف الهيدر والفوتر (Header/Footer Removal):
استخدم Regular Expressions (Regex) لحذف الأسطر التي تحتوي فقط على أرقام (مثل ٣٠٢ ٣٠٢ أو ٥١٥١) أو الأسطر التي تتكرر في كل صفحة (مثل "المعايير الشرعية").
إصلاح الفهرس:
احذف أي سطر يحتوي على أكثر من 5 نقاط متتالية \.{5,}.
معالجة الحواشي:
هذا أصعب جزء. حاول استخدام مكتبات مثل pdfplumber في بايثون، فهي تتيح لك استخراج النص بناءً على موقعه في الصفحة (CropBox). يمكنك استبعاد الجزء السفلي من الصفحة (حيث توجد الهوامش) ومعالجته بشكل منفصل أو حذفه إذا لم يكن ضرورياً للبحث.
الخلاصة:
أنصحك باستخدام ملف PDF الأصلي مع Gemini حالياً، فهو أفضل بكثير من هذا الملف النصي. لا تستخدم هذا الملف النصي إلا بعد تطبيق "إزالة التكرار" (De-duplication) وتنظيف الأرقام العشوائية.