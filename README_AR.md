# ุฃุฏุงุฉ ุชูุธูู ูููุงุช PDF ููุบุฉ ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ

ุฃุฏุงุฉ ุฃูุชููุงุชูููุฉ ูุชูุฏูุฉ ูุชูุธูู ูุชุฌููุฒ ูููุงุช PDF (ุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ) ูุงุณุชุฎุฏุงููุง ูุน Gemini File Search.

## ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### โ ุญูุงูุฉ ุตุงุฑูุฉ ูููุญุชูู ุงูููู
- **ุนุฏู ุญุฐู ุงูุฌุฏุงูู ููุงุฆูุงู**: ุฃู ุตูุฑุฉ ุชุญุชูู ุนูู 3+ ุฃุณุทุฑ ุฃู ุจููุฉ ุฌุฏูููุฉ ูุญููุฉ ุชูุงูุงู
- **ุญูุธ 3 ูุณุฎ**: raw.pdf (ุฃุตูู)ุ ocr.pdf (ุจุนุฏ OCR)ุ cleaned.pdf (ููุงุฆู)
- **ูุธุงู ูุนุงููุฉ ุฅูุฒุงูู**: ูุฑุงุฌุนุฉ ุฌููุน ุงูุชุบููุฑุงุช ูุจู ุงูุชุทุจูู ุงูููุงุฆู

### ๐ ูุนุงูุฌุฉ OCR ุฐููุฉ
- ุชูุณูู ุชููุงุฆู ูููููุงุช ุงููุจูุฑุฉ (>200 ุตูุญุฉ) ูุชุฌูุจ ุงุณุชููุงู ุงูุฐุงูุฑุฉ
- ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ (ara) ูุงูุฅูุฌููุฒูุฉ (eng)
- ุชุตุญูุญ ุชููุงุฆู ููุตูุญุงุช ุงููุงุฆูุฉ ูุงูุฏูุฑุงู

### ๐ฏ ุงูุชุดุงู ูุชูุฏู ููู Headers/Footers
- **3 ุฎูุงุฑุฒููุงุช ูุชูุงุฒูุฉ**:
  1. ุชุญููู ุงูุชูุฑุงุฑ ุงููุตู
  2. ูุทุงุจูุฉ ููุงุถุน ุงูู bounding boxes
  3. ุงูููุงุฑูุฉ ุดุจู ุงูุญุฑููุฉ (fuzzy matching)
- ุงุฎุชูุงุฑ ุชููุงุฆู ููุฎูุงุฑุฒููุฉ ุงูุฃุนูู ุฏูุฉ (consistency score)

### ๐ผ๏ธ ุชุตููู ุฐูู ููุตูุฑ
- ุญูุงูุฉ ุงูุฌุฏุงูู ูุงููุญุชูู ุงููุตู
- ุฅุฒุงูุฉ ุขููุฉ ููุตูุฑ ุงูุฒุฎุฑููุฉ ููุท
- ูุถุน skip-mode ููุตูุญุงุช ููุฎูุถุฉ ุงูุซูุฉ

### ๐ ุงุณุชุฎุฑุงุฌ ูุต ุขูู
- **ูุง ุชุนุฏูู ูููุญุชูู**: ููููุน ุฅุนุงุฏุฉ ุงูุตูุงุบุฉ ุฃู ุงูุชุตุญูุญ ุงูุฅููุงุฆู
- ุฏุนู RTL/LTR ุชููุงุฆู ููู ุตูุญุฉ
- ููุท Unicode normalization (NFC)

## ุงูุชุซุจูุช

### ุนูู Replit

```bash
# ุชุซุจูุช ุญุฒู ุงููุธุงู (ุงุณุชุฎุฏู ุฃุฏุงุฉ Packager ูู Replit)
# ุงููุทููุจ: tesseract, poppler_utils, ghostscript

# ุฃู ุงุณุชุฎุฏู ุงูุณูุฑูุจุช
chmod +x setup.sh
./setup.sh

# ุชุซุจูุช ููุชุจุงุช Python
pip install -r requirements.txt

# ูุณุฎ ููู ุงูุฅุนุฏุงุฏุงุช
cp config.yaml.example config.yaml
```

### ุนูู Linux ุนุงุฏู

```bash
# ุชุดุบูู ุณูุฑูุจุช ุงูุชุซุจูุช (ูุชุทูุจ sudo)
chmod +x setup.sh
./setup.sh
```

## ุงูุงุณุชุฎุฏุงู

### 1. ุชุญุถูุฑ ุงููููุงุช
```bash
# ุถุน ูููุงุช PDF ูู ูุฌูุฏ context/
mkdir -p context
cp AAOIFI_AR.pdf AAOIFI_EN.pdf context/
```

### 2. ุถุจุท ุงูุฅุนุฏุงุฏุงุช
ุนุฏูู ููู `config.yaml` ุญุณุจ ุงุญุชูุงุฌุงุชู:

```yaml
# ุชุญุฏูุฏ ูุบุฉ ูู ููู
language_per_file:
  AAOIFI_AR.pdf: "ara"
  AAOIFI_EN.pdf: "eng"

# ุญุฌู ุงูุฃุฌุฒุงุก ูุชูุณูู PDF ุงููุจูุฑ
ocr:
  chunk_size: 200

# ุญุฏ ุงููุดู ุนู headers/footers
header_footer:
  detection_threshold: 0.85

# ุญูุงูุฉ ุงูุฌุฏุงูู
images:
  keep_tables: true
  min_lines_for_table: 3
```

### 3. ุชุดุบูู ูุถุน ุงููุนุงููุฉ (ููุตู ุจู)
```bash
python3 scripts/clean_pdfs.py --preview
```

ูุฐุง ุณูููุดุฆ:
- ุชูุฑูุฑ ุชูุตููู ูู `report/`
- ุนููุงุช ูู ุงูู headers/footers ุงูููุชุดูุฉ
- ูุงุฆูุฉ ุจุงูุตูุฑ ุงูุชู ุณุชูุญุฐู
- **ูู ูุชู ุญุฐู ุฃู ุดูุก ููุงุฆูุงู**

### 4. ูุฑุงุฌุนุฉ ุงูุชูุงุฑูุฑ
```bash
# ุงูุชุญ ุชูุฑูุฑ ุงููุนุงููุฉ
cat report/*_preview.json

# ุฑุงุฌุน ุงูุนููุงุช ุงููุนุฑูุถุฉ ูู ุงูุชูุฑูุฑ
```

### 5. ุงูุชูููุฐ ุงูููุงุฆู (ุจุนุฏ ุงูููุงููุฉ)
```bash
python3 scripts/clean_pdfs.py
```

## ุงููุฎุฑุฌุงุช

ุจุนุฏ ุงููุนุงูุฌุฉ ุงููุงููุฉุ ุณุชุฌุฏ ูู ูุฌูุฏ `output/`:

### ูููุงุช PDF
```
output/
โโโ AAOIFI_AR_raw.pdf          # ูุณุฎุฉ ุฃุตููุฉ ุงุญุชูุงุทูุฉ
โโโ AAOIFI_AR_ocr.pdf          # ุจุนุฏ OCR ููุท
โโโ AAOIFI_AR_cleaned.pdf      # ููุงุฆู ููุธู
โโโ AAOIFI_EN_raw.pdf
โโโ AAOIFI_EN_ocr.pdf
โโโ AAOIFI_EN_cleaned.pdf
```

### ูููุงุช ุงููุตูุต
```
output/
โโโ AAOIFI_AR_cleaned.txt              # ูุต ูุงูู UTF-8
โโโ AAOIFI_AR_chunk_simulation.txt     # ูุญุงูุงุฉ Gemini chunks
โโโ AAOIFI_EN_cleaned.txt
โโโ AAOIFI_EN_chunk_simulation.txt
```

### ุงูุชูุงุฑูุฑ
```
report/
โโโ cleaning_report.json          # ุชูุฑูุฑ ุดุงูู
โโโ AAOIFI_AR_preview.json        # ูุนุงููุฉ ูุจู ุงูุชูููุฐ
โโโ AAOIFI_EN_preview.json
```

## ุงูุจููุฉ ุงูุชูููุฉ

```
.
โโโ context/              # ุถุน ูููุงุช PDF ููุง
โโโ output/               # ุงููููุงุช ุงููุนุงูุฌุฉ
โโโ report/               # ุงูุชูุงุฑูุฑ ูุงููุนุงููุงุช
โโโ scripts/
โ   โโโ clean_pdfs.py    # ุงูุณูุฑูุจุช ุงูุฑุฆูุณู
โโโ services/
โ   โโโ ocr_processor.py           # ูุนุงูุฌุฉ OCR ูุน ุงูุชูุณูู
โ   โโโ header_footer_detector.py  # 3 ุฎูุงุฑุฒููุงุช
โ   โโโ image_classifier.py        # ุญูุงูุฉ ุงูุฌุฏุงูู
โ   โโโ text_extractor.py          # RTL/LTR ุขูู
โ   โโโ preview_generator.py       # ุงููุนุงููุงุช
โ   โโโ pdf_utils.py               # ุฃุฏูุงุช ูุณุงุนุฏุฉ
โโโ config.yaml          # ุงูุฅุนุฏุงุฏุงุช
โโโ requirements.txt
```

## ุฎูุงุฑุงุช ูุชูุฏูุฉ

### ูุนุงูุฌุฉ ููู ูุงุญุฏ ููุท
```bash
python3 scripts/clean_pdfs.py --file context/AAOIFI_AR.pdf
```

### ุชูุนูู ุงูู verbose logging
```bash
python3 scripts/clean_pdfs.py --verbose
```

### ุชุนุทูู ุฅุฒุงูุฉ ุงูุตูุฑ (ุญูุธ ูู ุดูุก)
ูู `config.yaml`:
```yaml
images:
  remove_decorative: false
```

## ุถูุงูุงุช ุงูุณูุงูุฉ

### โ ูุง ุชูุนูู ุงูุฃุฏุงุฉ:
- OCR ูููุต ุบูุฑ ุงููุงุจู ููุจุญุซ
- ุฅุฒุงูุฉ headers/footers ุงููุชูุฑุฑุฉ
- ุฅุฒุงูุฉ ุตูุฑ ุฒุฎุฑููุฉ ุตุบูุฑุฉ (<5% ูู ุงูุตูุญุฉ)
- Unicode normalization ููุท

### โ ูุง ูุง ุชูุนูู ุงูุฃุฏุงุฉ ุฃุจุฏุงู:
- ุชุนุฏูู ุงููุญุชูู ุงููุตู ุฃู ุฅุนุงุฏุฉ ุงูุตูุงุบุฉ
- ุญุฐู ุงูุฌุฏุงูู ุฃู ุงูุตูุฑ ุงููููุฉ
- ุชุตุญูุญ ุฅููุงุฆู ุฃู ูุญูู
- ุชุบููุฑ ุงูุฃุฑูุงู ุฃู ุงููุตุทูุญุงุช ุงููุงููููุฉ
- ุงููุณุงุณ ุจุจููุฉ ุงูููุฑุงุช

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "tesseract: command not found"
```bash
# ุนูู Replit: ุงุณุชุฎุฏู packager tool ูุชุซุจูุช tesseract
# ุนูู Linux:
sudo apt-get install tesseract-ocr tesseract-ocr-ara tesseract-ocr-eng
```

### ุงููุดููุฉ: ููุงุฏ ุงูุฐุงูุฑุฉ ูุน ููู ูุจูุฑ
ูู `config.yaml`:
```yaml
ocr:
  chunk_size: 100  # ููู ุงูุญุฌู ุฅูู 100 ุตูุญุฉ
```

### ุงููุดููุฉ: ุญูุฐูุช ุฌุฏุงูู ุจุงูุฎุทุฃ
ูุฐุง ูุง ูุฌุจ ุฃู ูุญุฏุซ! ุฑุงุฌุน:
```bash
# ุงูุชุญ ุชูุฑูุฑ ุงููุนุงููุฉ
cat report/*_preview.json

# ุชุญูู ูู ุชุตููู ุงูุตูุฑ
# ุฅุฐุง ุญุฏุซุ ุฃุจูุบูุง ููุญุณู ุงูุฎูุงุฑุฒููุฉ
```

## ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

**ุณ: ูู ูุณุชุบุฑู ูุนุงูุฌุฉ ููู 1300 ุตูุญุฉุ**  
ุฌ: ุญูุงูู 20-40 ุฏูููุฉ ุญุณุจ ุณุฑุนุฉ ุงูุฌูุงุฒ (ุจูุถู ุงูุชูุณูู ุงูุชููุงุฆู).

**ุณ: ูู ูููููู ุงุณุชุฎุฏุงู ุงููููุงุช ูุจุงุดุฑุฉ ูุน Geminiุ**  
ุฌ: ูุนู! ุงููููุงุช `*_cleaned.pdf` ู `*_cleaned.txt` ุฌุงูุฒุฉ ููุฑูุน.

**ุณ: ูุงุฐุง ูู ูู ุชููุชุดู ุจุนุถ headers/footersุ**  
ุฌ: ุฑุงุฌุน `config.yaml` ูููู `detection_threshold` ูู 0.85 ุฅูู 0.75

**ุณ: ูู ุชุฏุนู ูุบุงุช ุฃุฎุฑูุ**  
ุฌ: ูุนูุ ุนุฏูู `language_per_file` ูู ุงูุฅุนุฏุงุฏุงุช (ูุซู: fra, deu, spa)

## ุงููุณุงููุฉ ูุงูุฏุนู

- ูููุดุงูู ุงูุชูููุฉ: ุฑุงุฌุน `pdf_cleaning.log`
- ููุฃุณุฆูุฉ: ุงูุชุญ issue ุนูู GitHub
- ููุชุญุณููุงุช: Pull requests ูุฑุญุจ ุจูุง!

## ุงูุชุฑุฎูุต

MIT License - ุงุณุชุฎุฏู ุจุญุฑูุฉ

---

**ููุงุญุธุฉ ูููุฉ**: ูุฐู ุงูุฃุฏุงุฉ ูุตููุฉ ููุงุณุชุฎุฏุงู ูุน ูููุงุช AAOIFI ููููุงุช ูุงููููุฉ/ูุญุงุณุจูุฉ ูุดุงุจูุฉ. 
ุฏุงุฆูุงู ุฑุงุฌุน ุงููุฎุฑุฌุงุช ูุจู ุงูุงุณุชุฎุฏุงู ุงูุฑุณูู.
