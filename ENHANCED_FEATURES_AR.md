# ุงูููุฒุงุช ุงููุญุณููุฉ ูููุนุงูุฌ - Enhanced Features

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุถุงูุฉ **3 ููุฒุงุช ุญุงุณูุฉ** ูุชุญุณูู ุฃุฏุงุก ุงููููุงุช ูุน Gemini File Search:

### โ 1. ููููุฉ Markdown ุงูุชููุงุฆูุฉ
**ุงููุดููุฉ:** Gemini ูุณุชููุฏ ูู ููููุฉ ุงููุต (ุนูุงูููุ ุนูุงููู ูุฑุนูุฉ) ูููู ุงูุชุณูุณู ุงููุฑูู ูููุญุชูู.

**ุงูุญู:** ุงููุนุงูุฌ ุงูุขู ููุชุดู ุงูุนูุงููู ุชููุงุฆูุงู ุจูุงุกู ุนูู **ุญุฌู ุงูุฎุท** ููุถูู ุนูุงูุงุช Markdown:
- `#` ููุนูุงููู ุงูุฑุฆูุณูุฉ (ูุซู: ูุนูุงุฑ ุฑูู 1)
- `##` ููุนูุงููู ุงููุฑุนูุฉ (ูุซู: 1/1 ุงูุชุนุฑูู)

**ุงููุงุฆุฏุฉ:** Gemini ููุณูู ุงูููู (chunking) ุจุดูู ุฐูู ุนูุฏ ุงูุนูุงูููุ ุจุฏูุงู ูู ุงูุชูุณูู ุงูุนุดูุงุฆู ูู ููุชุตู ุงูุฌููุฉ.

---

### โ 2. ุฅุฒุงูุฉ "ุงูููุงูุฉ ุงููุตูุฉ" ุงููุฑุขููุฉ ุงูุฐููุฉ
**ุงููุดููุฉ:** ุงูุฎุท ุงููุฎุตุต ููุขูุงุช ุงููุฑุขููุฉ ููุณุชุฎุฑุฌ ูุญุฑูู ูุงุชูููุฉ ุนุดูุงุฆูุฉ (ูุซู: `U T S R Q P`).

**ุงูุญู:** ุงููุนุงูุฌ ูุญุชูู ุนูู ุฎูุงุฑุฒููุฉ ุฐููุฉ:
- โ **ูุญุฐู** ุงูุญุฑูู ุงููุงุชูููุฉ ุงูุนุดูุงุฆูุฉ (ูุซู: U T S R)
- โ **ูุญุชูุธ** ุจุงููุตุทูุญุงุช ุงูุฅูุฌููุฒูุฉ ุงูุญููููุฉ (ูุซู: SUKUK, MURABAHA, SWAPS, OPTIONS)
- โ ูุณุชุจุฏู ุงููุตูุต ุงููุฑุขููุฉ ุจู `[ูุต ูุฑุขูู]` (ุฃู ูุญุฐููุง ูููุงู ุญุณุจ ุงูุฅุนุฏุงุฏุงุช)

**ูุงุฆูุฉ ุงููุตุทูุญุงุช ุงููุญููุฉ:**
```
SUKUK, MURABAHA, MUSHARAKA, MUDARABA, IJARA, ISTISNA, SALAM, TAKAFUL
SHARIA, HALAL, HARAM, RIBA, FIQH
SWAPS, OPTIONS, DERIVATIVES, BONDS, EQUITY, ASSETS, LIABILITIES
AAOIFI, IFSB, IIFM, ISRA
USD, EUR, GBP, SAR, FAS, IFRS, IAS
```

**ุงููุงุฆุฏุฉ:** ูุต ูุธูู ุจุฏูู ุฑููุฒ ุบุฑูุจุฉุ ูุน ุงูุญูุงุธ ุนูู ุฌููุน ุงููุตุทูุญุงุช ุงููุงููุฉ ูุงูุดุฑุนูุฉ ุงููููุฉ.

---

### โ 3. ูุนุงูุฌุฉ RTL ุงูุตุญูุญุฉ
**ุงููุดููุฉ:** ุงููุตูุต ุงูุนุฑุจูุฉ ูุฏ ูุง ุชูุนุฑุถ ุจุดูู ุตุญูุญ ูู ุจุนุถ ุงูุจุฑุงูุฌ.

**ุงูุญู:** ุงุณุชุฎุฏุงู `arabic-reshaper` ู `python-bidi` ูุถูุงู:
- ุชูุตูู ุงูุญุฑูู ุงูุนุฑุจูุฉ ุจุดูู ุตุญูุญ
- ุชุฑุชูุจ RTL (ูู ุงููููู ูููุณุงุฑ) ุณููู
- ุนุฑุถ ุงูุฃุฑูุงู ูุงูุฃููุงุณ ูู ุงูููุงู ุงูููุทูู ุงูุตุญูุญ

---

## ููููุฉ ุงูุงุณุชุฎุฏุงู

### ุงูุทุฑููุฉ 1: ุงูุณูุฑูุจุช ุงูุฌุฏูุฏ (ููุตู ุจู)

```bash
# ูุนุงูุฌุฉ ููู PDF ูุน ุฌููุน ุงูููุฒุงุช ุงููุญุณููุฉ
python3 scripts/process_with_markdown.py context/AAOIFI_AR.pdf
```

**ุงููุงุชุฌ:**
- `filename_structured.md` - ููู Markdown ุจุงูุนูุงููู ุงููุฑููุฉ
- `filename_clean.txt` - ูุต ุนุงุฏู ูุธูู
- `filename_rtl.txt` - ูุต ุจุชูุณูู RTL ุตุญูุญ

---

### ุงูุทุฑููุฉ 2: ุงูุชูุงูู ูุน ุงูุณูุฑูุจุช ุงูุฃุณุงุณู

ุงูุณูุฑูุจุช ุงูุฃุณุงุณู `clean_pdfs.py` ูููู ุงุณุชุฎุฏุงูู ูุงููุนุชุงุฏุ ุซู ุชุทุจูู ุงููุนุงูุฌุฉ ุงููุญุณููุฉ:

```bash
# 1. ุชุดุบูู ุงูุชูุธูู ุงูุฃุณุงุณู
python3 scripts/clean_pdfs.py --preview

# 2. ุจุนุฏ ุงููุฑุงุฌุนุฉุ ุชุดุบูู ุงูุชูุธูู ุงูููุงุฆู
python3 scripts/clean_pdfs.py

# 3. ุชุทุจูู ุงููุนุงูุฌุฉ ุงููุญุณููุฉ ุนูู ุงููุงุชุฌ
python3 scripts/process_with_markdown.py output/AAOIFI_AR_cleaned.pdf
```

---

## ุฅุนุฏุงุฏุงุช ุงูุชุฎุตูุต

ูู ููู `config.yaml`:

```yaml
text:
  # ุชูุนูู/ุฅููุงู ููููุฉ Markdown
  enable_markdown: true
  
  # ุญุฏ ุญุฌู ุงูุฎุท ููุนููุงู ุงูุฑุฆูุณู H1
  h1_font_size: 16  # ุงุถุจุทู ุญุณุจ PDF
  
  # ุญุฏ ุญุฌู ุงูุฎุท ููุนููุงู ุงููุฑุนู H2
  h2_font_size: 14  # ุงุถุจุทู ุญุณุจ PDF
  
  # ุชูุนูู/ุฅููุงู ุชูุธูู ุงููุตูุต ุงููุฑุขููุฉ
  remove_quranic_noise: true
  
  # ุงููุต ุงูุจุฏูู ููุขูุงุช ุงููุฑุขููุฉ
  quranic_placeholder: "[ูุต ูุฑุขูู]"
  # ุฃู ุงุณุชุฎุฏู "" ูุญุฐู ุงูุขูุงุช ูููุงู ุจุฏูู ุจุฏูู
```

---

## ูุซุงู ุนูู ุงููุชูุฌุฉ

### ูุจู ุงููุนุงูุฌุฉ:
```
ุงููุนุงููุฑ ุงูุดุฑุนูุฉ
U T S R Q P
ุงููุนูุงุฑ ุงููุญุงุณุจู ุฑูู 1
ุงูุชุนุฑูู
ุชุนุฑูู ุงููุฑุงุจุญุฉ ูู...
```

### ุจุนุฏ ุงููุนุงูุฌุฉ (Markdown):
```markdown
# ุงููุนูุงุฑ ุงููุญุงุณุจู ุฑูู 1

## ุงูุชุนุฑูู

ุชุนุฑูู ุงููุฑุงุจุญุฉ ูู...

[ูุต ูุฑุขูู]
```

---

## ุงุฎุชุจุงุฑ ุงูุฌูุฏุฉ

ุจุนุฏ ุงููุนุงูุฌุฉุ ุงูุชุญ ุงูููู `_structured.md` ูุชุญูู ูู:

โ **ุงูุนูุงููู ููุณูุฉ ุจุดูู ุตุญูุญ:**
- ุงูุนูุงููู ุงูุฑุฆูุณูุฉ ุชุจุฏุฃ ุจู `#`
- ุงูุนูุงููู ุงููุฑุนูุฉ ุชุจุฏุฃ ุจู `##`

โ **ุงููุตูุต ุงููุฑุขููุฉ:**
- ุงุณุชูุจุฏูุช ุจู `[ูุต ูุฑุขูู]` (ุฃู ุญูุฐูุช)
- ูุง ุชูุฌุฏ ุญุฑูู ุนุดูุงุฆูุฉ ูุซู U T S R

โ **ุงููุตุทูุญุงุช ุงูุฅูุฌููุฒูุฉ:**
- SUKUK, MURABAHA, SWAPS ููุฌูุฏุฉ ููู ุชูุญุฐู
- ุฌููุน ุงููุตุทูุญุงุช ุงููุงููุฉ ูุญููุธุฉ

โ **ุงูููููุฉ:**
- ูู ูุนูุงุฑ ุฃู ูุณู ูู ุนููุงู ูุงุถุญ
- ุงูุชุณูุณู ููุทูู ูุณูู ุงููุฑุงุกุฉ

---

## ุฑูุน ุงูููู ูู Gemini

1. โ ุงุณุชุฎุฏู ุงูููู `_structured.md` (ุตูุบุฉ Markdown)
2. โ Gemini ุณูุณุชููุฏ ูู ุงูุจููุฉ ุงููุฑููุฉ ููุนูุงููู
3. โ ุงููุต ุงููุธูู ูุญุณูู ุฏูุฉ RAG ุจุดูู ููุญูุธ
4. โ ุนูุฏ ุณุคุงู Gemini ุนู "ุชุนุฑูู ุงููุฑุงุจุญุฉ"ุ ุณูุฌุฏ ุงูุฅุฌุงุจุฉ ุจุณูููุฉ ูุฃู ุงูุนููุงู `## ุงูุชุนุฑูู` ูุงุถุญ

---

## ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชูุฌุฏ ุนูุงููู ูู ุงูู Markdown
**ุงูุญู:** ููู ูููุฉ `h1_font_size` ู `h2_font_size` ูู `config.yaml`

### ุงููุดููุฉ: ุญูุฐูุช ูุตุทูุญุงุช ุฅูุฌููุฒูุฉ ูููุฉ
**ุงูุญู:** 
1. ุงูุชุญ `services/enhanced_text_processor.py`
2. ุฃุถู ุงููุตุทูุญ ุงูุฌุฏูุฏ ุฅูู ูุงุฆูุฉ `valid_english_terms`
3. ุฃุนุฏ ุชุดุบูู ุงููุนุงูุฌุฉ

### ุงููุดููุฉ: ูู ุชูุญุฐู ุงูุญุฑูู ุงููุฑุขููุฉ
**ุงูุญู:** ุชุฃูุฏ ูู ุชูุนูู `remove_quranic_noise: true` ูู `config.yaml`

---

## ุงูููุฎุต

๐ฏ **ุงููุฏู:** ุงูุญุตูู ุนูู ููู Markdown ูุธูู ูููุธู ูุชููู ุนูู PDF ุงูุฃุตูู ูู ููู Gemini.

โ **ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- ูุต ููุธู ุจุนูุงููู ูุงุถุญุฉ (# ##)
- ุฎุงูู ูู ุงูุฑููุฒ ุงูุบุฑูุจุฉ
- ูุญุชูุธ ุจุฌููุน ุงููุตุทูุญุงุช ุงููููุฉ
- ุฌุงูุฒ ููุฑูุน ูุจุงุดุฑุฉ ุฅูู Gemini File Search

---

## ุงูุฏุนู

ูู ุญุงูุฉ ูุฌูุฏ ุฃุณุฆูุฉ ุฃู ูุดุงูู:
1. ุฑุงุฌุน ููู `README.md` ููุชุนูููุงุช ุงูุฃุณุงุณูุฉ
2. ุชุญูู ูู ููู ุงูุฅุนุฏุงุฏุงุช `config.yaml`
3. ุฑุงุฌุน ุงูุณุฌูุงุช ูู `pdf_cleaning.log`
